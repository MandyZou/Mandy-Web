<html>
<head>
    <title>Missouri Workers' Compensation</title>

    <script src="https://d3js.org/d3.v4.min.js"></script>

    <script src="jquery-3.2.1.min.js"></script>

    <style>
      .axis .domain {
        display: none;
      }
      /*Delete the baseline for x-axis and y-axis, and delete the two end ticks*/

      .toolTip {
          position: absolute;
          display: none;
          min-width: 80px;
          height: auto;
          background: none repeat scroll 0 0 #ffffff;
          border: 1px solid #6F257F;
          padding: 14px;
          text-align: center;
        }

       #Layer_1 {
        width: 30%;
        float: left;
        margin-left: 30%;
       } 

       .bodypart-text {
        padding-top: 10%;
       }

    </style>
</head>

<body>
    <div class="body-all">
        <?xml version="1.0" encoding="iso-8859-1"?>
        <!-- Generator: Adobe Illustrator 19.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
           viewBox="0 0 1024 1128" style="enable-background:new 0 0 1024 1128;" xml:space="preserve">
        <image style="display:none;overflow:visible;" width="564" height="1128" xlink:href="human.jpg"  transform="matrix(1 0 0 1 230 0)">
        </image>
        <circle id="body-head" style="fill:#FFFFFF;stroke:#000000;stroke-miterlimit:10;" cx="497.546" cy="127.284" r="73.604"/>
        <path style="fill:#FFFFFF;stroke:#000000;stroke-miterlimit:10;" d="M568.668,513.007H421.754c-5.5,0-10.001-4.5-10.001-10.001
          l22.5-111.177l-22.5-170.494c0-5.5,4.5-10.001,10.001-10.001l73.84,17.196l73.074-17.196c5.5,0,10.001,4.5,10.001,10.001
          l-17.472,170.494l17.472,111.177C578.669,508.507,574.168,513.007,568.668,513.007z"/>
        <path class="body-arm" style="fill:#FFFFFF;stroke:#000000;stroke-miterlimit:10;" d="M336.849,514.46l-18.587-3.671
          c-6.475-1.279-10.726-7.622-9.448-14.097l54.023-273.553c1.279-6.475,7.623-10.726,14.098-9.448l18.587,3.671
          c6.475,1.279,10.726,7.623,9.448,14.097l-54.023,273.553C349.668,511.487,343.324,515.739,336.849,514.46z"/>
        <path class="body-arm" style="fill:#FFFFFF;stroke:#000000;stroke-miterlimit:10;" d="M660.888,516.772l18.474-4.206
          c6.435-1.465,10.502-7.929,9.036-14.365l-61.846-271.624c-1.465-6.435-7.929-10.502-14.365-9.037l-18.474,4.206
          c-6.435,1.465-10.502,7.929-9.036,14.365l61.846,271.624C647.988,514.171,654.452,518.237,660.888,516.772z"/>
        <path class="body-leg" style="fill:#FFFFFF;stroke:#000000;stroke-miterlimit:10;" d="M423.415,528.312h39.734c14.519,0,26.829,9.021,25.812,19.016
          l-14.018,137.788c-0.038,0.378-0.061,0.758-0.068,1.139l-2.916,168.102c-0.192,11.091-10.993,19.58-25.027,19.58h0
          c-16.626,0-30.495-11.744-29.443-24.788l12.857-159.443c0.105-1.3,0.024-2.614-0.241-3.919l-28.4-139.982
          C399.782,536.32,409.773,528.312,423.415,528.312z"/>
        <path class="body-leg" style="fill:#FFFFFF;stroke:#000000;stroke-miterlimit:10;" d="M575.093,525.874l-45.322,0c-13.449,0-24.86,8.397-23.93,17.682
          l14.185,141.611c0.034,0.343,0.054,0.688,0.06,1.034l2.773,169.634c0.163,9.986,9.973,17.614,22.735,17.614h0
          c14.909,0,27.504-10.278,26.96-21.902l-7.595-162.175c-0.05-1.07,0.037-2.148,0.259-3.22l29.894-144.01
          C596.942,533.328,587.729,525.874,575.093,525.874z"/>
        <path class="body-feet" style="fill:#FFFFFF;stroke:#000000;stroke-miterlimit:10;" d="M451.235,923.934h-69.271c-6.6,0-12-5.4-12-12
          c0,0,56.396-32.739,62.996-32.739h18.275c6.6,0,12,5.4,12,12v20.739C463.235,918.534,457.835,923.934,451.235,923.934z"/>
        <path class="body-feet" style="fill:#FFFFFF;stroke:#000000;stroke-miterlimit:10;" d="M610.632,923.934h-69.271c-6.6,0-12-5.4-12-12v-20.739
          c0-6.6,5.4-12,12-12h19.477c6.6,0,61.793,32.739,61.793,32.739C622.632,918.534,617.232,923.934,610.632,923.934z"/>
        <path class="body-pinky" style="fill:#FFFFFF;stroke:#000000;stroke-miterlimit:10;" d="M295.409,552.442l-1.596-1.035
          c-1.162-0.753-1.496-2.321-0.743-3.482l10.686-16.478c0.753-1.162,2.321-1.496,3.482-0.743l1.596,1.035
          c1.162,0.753,1.496,2.32,0.743,3.482L298.892,551.7C298.138,552.862,296.571,553.196,295.409,552.442z"/>
        <path class="body-ring" style="fill:#FFFFFF;stroke:#000000;stroke-miterlimit:10;" d="M306.78,571.056l-1.867-0.368
          c-1.359-0.268-2.251-1.598-1.984-2.957l6.768-34.373c0.268-1.359,1.598-2.251,2.957-1.984l1.867,0.368
          c1.359,0.268,2.251,1.598,1.984,2.957l-6.768,34.373C309.469,570.431,308.138,571.323,306.78,571.056z"/>
        <path class="body-middle" style="fill:#FFFFFF;stroke:#000000;stroke-miterlimit:10;" d="M314.051,581.572l-1.867-0.368
          c-1.359-0.268-2.251-1.598-1.984-2.957l8.217-41.73c0.268-1.359,1.598-2.251,2.957-1.984l1.867,0.368
          c1.359,0.268,2.251,1.598,1.984,2.957l-8.217,41.729C316.74,580.946,315.409,581.839,314.051,581.572z"/>
        <path class="body-index" style="fill:#FFFFFF;stroke:#000000;stroke-miterlimit:10;" d="M324.539,577.286l-1.867-0.368
          c-1.359-0.268-2.251-1.598-1.984-2.957l7.211-36.62c0.268-1.359,1.598-2.251,2.957-1.984l1.867,0.368
          c1.359,0.268,2.251,1.598,1.984,2.957l-7.211,36.62C327.229,576.661,325.898,577.554,324.539,577.286z"/>
        <path class="body-thumb" style="fill:#FFFFFF;stroke:#000000;stroke-miterlimit:10;" d="M339.161,558.604l-1.888-0.241
          c-1.374-0.175-2.354-1.442-2.179-2.816l2.106-16.519c0.175-1.374,1.442-2.354,2.816-2.179l1.888,0.241
          c1.374,0.175,2.354,1.442,2.179,2.816l-2.106,16.518C341.802,557.798,340.534,558.779,339.161,558.604z"/>
        <path class="body-pinky" style="fill:#FFFFFF;stroke:#000000;stroke-miterlimit:10;" d="M705.159,552.833l1.566-1.081
          c1.14-0.787,1.428-2.363,0.642-3.502l-11.157-16.162c-0.787-1.14-2.363-1.428-3.502-0.642l-1.566,1.081
          c-1.14,0.787-1.428,2.363-0.642,3.502l11.157,16.162C702.443,553.331,704.019,553.62,705.159,552.833z"/>
        <path class="body-ring" style="fill:#FFFFFF;stroke:#000000;stroke-miterlimit:10;" d="M694.331,571.767l1.855-0.421
          c1.35-0.307,2.204-1.662,1.898-3.013l-7.758-34.163c-0.307-1.35-1.662-2.204-3.013-1.898l-1.855,0.421
          c-1.35,0.307-2.204,1.662-1.898,3.013l7.758,34.163C691.625,571.22,692.981,572.074,694.331,571.767z"/>
        <path class="body-middle" style="fill:#FFFFFF;stroke:#000000;stroke-miterlimit:10;" d="M687.367,582.488l1.855-0.421
          c1.35-0.307,2.204-1.662,1.898-3.013l-9.419-41.475c-0.307-1.35-1.662-2.204-3.013-1.898l-1.855,0.421
          c-1.35,0.307-2.204,1.662-1.898,3.013l9.419,41.475C684.661,581.941,686.016,582.795,687.367,582.488z"/>
        <path class="body-index" style="fill:#FFFFFF;stroke:#000000;stroke-miterlimit:10;" d="M676.759,578.508l1.855-0.421
          c1.35-0.307,2.204-1.662,1.898-3.013l-8.265-36.396c-0.307-1.35-1.662-2.204-3.013-1.898l-1.855,0.421
          c-1.35,0.307-2.204,1.662-1.898,3.013l8.266,36.396C674.053,577.96,675.408,578.814,676.759,578.508z"/>
        <path class="body-thumb" style="fill:#FFFFFF;stroke:#000000;stroke-miterlimit:10;" d="M661.604,560.255l1.88-0.295
          c1.368-0.215,2.312-1.51,2.097-2.878l-2.582-16.451c-0.215-1.368-1.51-2.312-2.878-2.097l-1.88,0.295
          c-1.368,0.215-2.312,1.51-2.097,2.878l2.582,16.451C658.941,559.526,660.236,560.47,661.604,560.255z"/>
        <circle class="body-eye" style="fill:#FFFFFF;stroke:#000000;stroke-miterlimit:10;" cx="468.515" cy="107.954" r="9.168"/>
        <circle class="body-eye" style="fill:#FFFFFF;stroke:#000000;stroke-miterlimit:10;" cx="526.021" cy="107.954" r="9.168"/>
        <path class="body-ear" style="fill:none;stroke:#000000;stroke-miterlimit:10;" d="M424.941,117.123c0,0-20.937-3.944-0.611,17.766"/>
        <path class="body-ear" style="fill:none;stroke:#000000;stroke-miterlimit:10;" d="M571.285,122.182c0,0,18.606-1.353-1.72,20.357"/>
        <ellipse class="body-hand" transform="matrix(0.9926 0.1214 -0.1214 0.9926 66.1269 -35.65)" style="fill:#FFFFFF;stroke:#000000;stroke-miterlimit:10;" cx="325.683" cy="524.952" rx="15.243" ry="9.718"/>
        <ellipse class="body-hand" transform="matrix(0.9887 -0.15 0.15 0.9887 -71.263 107.0625)" style="fill:#FFFFFF;stroke:#000000;stroke-miterlimit:10;" cx="674.073" cy="525.925" rx="15.243" ry="9.718"/>
        <path style="fill:#FFFFFF;stroke:#000000;stroke-miterlimit:10;" d="M390.013,906.984"/>
        <path class="body-toe" style="fill:#FFFFFF;stroke:#000000;stroke-miterlimit:10;" d="M384.415,915.127H372.71c-3.079,0-5.598-2.519-5.598-5.598v0
          c0-3.079,2.519-5.598,5.598-5.598h11.705c3.079,0,5.598,2.519,5.598,5.598v0C390.013,912.607,387.494,915.127,384.415,915.127z"/>
        <path class="body-toe" style="fill:#FFFFFF;stroke:#000000;stroke-miterlimit:10;" d="M617.712,914.869h-11.705c-3.079,0-5.598-2.519-5.598-5.598v0
          c0-3.079,2.519-5.598,5.598-5.598h11.705c3.079,0,5.598,2.519,5.598,5.598v0C623.31,912.35,620.791,914.869,617.712,914.869z"/>
        <circle class="body-testicle" style="fill:#FFFFFF;stroke:#000000;stroke-miterlimit:10;" cx="497.865" cy="520.775" r="31.496"/>
        </svg>

        <!-- </div> -->

        <div class="bodypart-text" style="float: left; width: 400;">
            <p style="font-size: 10px"><em>Hover over body parts to see the compensation</em></p>
            <p><strong>Body Parts:</strong> <span id="parts"></span></p>
            <p><strong>Missouri:</strong> <span id="moPrice"></span></p>
            <p><strong>National Average:</strong> <span id="naPrice"></span></p>
        </div>
    </div>

    <script>
    // Eye
      $(document).ready(function(){
        $(".body-eye").on("mouseover", function(){
          $(".body-eye").css({fill: "#FF261B"});
          $("#parts").append("Eye");
          $("#moPrice").append("$69,457");
          $("#naPrice").append("$96,700");
        }).on("mouseout", function(){
          $(".body-eye").css({fill: "#fff"});
          $("#parts").empty();
          $("#moPrice").empty();
          $("#naPrice").empty();
        });
      });

    // Ear
      $(document).ready(function(){
          $(".body-ear").on("mouseover", function(){
            $(".body-ear").css({fill: "#FF261B"});
            $("#parts").append("Ear");
            $("#moPrice").append("$24,310");
            $("#naPrice").append("$38,050");
          }).on("mouseout", function(){
            $(".body-ear").css({fill: "#fff"});
            $("#parts").empty();
            $("#moPrice").empty();
            $("#naPrice").empty();
          });
        });

      // Arm
      $(document).ready(function(){
          $(".body-arm").on("mouseover", function(){
            $(".body-arm").css({fill: "#FF261B"});
            $("#parts").append("Arm");
            $("#moPrice").append("$115,100");
            $("#naPrice").append("$169,878");
            $("#115100").css({fill: "#fa6956"});
            $("#169878").css({fill: "#36bfc7"});
          }).on("mouseout", function(){
            $(".body-arm").css({fill: "#fff"});
            $("#parts").empty();
            $("#moPrice").empty();
            $("#naPrice").empty();
            $("#115100").css("fill", "");
            $("#169878").css("fill", "");
          });
        });

      // Leg
      $(document).ready(function(){
          $(".body-leg").on("mouseover", function(){
            $(".body-leg").css({fill: "#FF261B"});
            $("#parts").append("Leg");
            $("#moPrice").append("$102,697");
            $("#naPrice").append("$153,221");
            $("#102697").css({fill: "#fa6956"});
            $("#153221").css({fill: "#36bfc7"});
          }).on("mouseout", function(){
            $(".body-leg").css({fill: "#fff"});
            $("#parts").empty();
            $("#moPrice").empty();
            $("#naPrice").empty();
            $("#102697").css("fill", "");
            $("#153221").css("fill", "");
          });
        });

      // Hand
      $(document).ready(function(){
          $(".body-hand").on("mouseover", function(){
            $(".body-hand").css({fill: "#FF261B"});
            $("#parts").append("Hand");
            $("#moPrice").append("$86,821");
            $("#naPrice").append("$144,930");
            $("#86821").css({fill: "#fa6956"});
            $("#144930").css({fill: "#36bfc7"});
          }).on("mouseout", function(){
            $(".body-hand").css({fill: "#fff"});
            $("#parts").empty();
            $("#moPrice").empty();
            $("#naPrice").empty();
            $("#86821").css("fill", "");
            $("#144930").css("fill", "");
          });
        });

      // Thumb
      $(document).ready(function(){
          $(".body-thumb").on("mouseover", function(){
            $(".body-thumb").css({fill: "#FF261B"});
            $("#parts").append("Thumb");
            $("#moPrice").append("$29,767");
            $("#naPrice").append("$42,432");
            $("#29767").css({fill: "#fa6956"});
            $("#42432").css({fill: "#36bfc7"});
          }).on("mouseout", function(){
            $(".body-thumb").css({fill: "#fff"});
            $("#parts").empty();
            $("#moPrice").empty();
            $("#naPrice").empty();
            $("#29767").css("fill", "");
            $("#42432").css("fill", "");
          });
        });

      // Index
      $(document).ready(function(){
          $(".body-index").on("mouseover", function(){
            $(".body-index").css({fill: "#FF261B"});
            $("#parts").append("Index Finger");
            $("#moPrice").append("$22,235");
            $("#naPrice").append("$24,474");
            $("#22325").css({fill: "#fa6956"});
            $("#24474").css({fill: "#36bfc7"});
          }).on("mouseout", function(){
            $(".body-index").css({fill: "#fff"});
            $("#parts").empty();
            $("#moPrice").empty();
            $("#naPrice").empty();
            $("#22325").css("fill", "");
            $("#24474").css("fill", "");
          });
        });

      // Middle
      $(document).ready(function(){
          $(".body-middle").on("mouseover", function(){
            $(".body-middle").css({fill: "#FF261B"});
            $("#parts").append("Middle Finger");
            $("#moPrice").append("$17,364");
            $("#naPrice").append("$20,996");
            $("#17364").css({fill: "#fa6956"});
            $("#20996").css({fill: "#36bfc7"});
          }).on("mouseout", function(){
            $(".body-middle").css({fill: "#fff"});
            $("#parts").empty();
            $("#moPrice").empty();
            $("#naPrice").empty();
            $("#17364").css("fill", "");
            $("#20996").css("fill", "");
          });
        });

      // Ring
      $(document).ready(function(){
          $(".body-ring").on("mouseover", function(){
            $(".body-ring").css({fill: "#6DC066"});
            $("#parts").append("Ring Finger");
            $("#moPrice").append("$17,364");
            $("#naPrice").append("$14,660");
            $("#17365").css({fill: "#fa6956"});
            $("#14660").css({fill: "#36bfc7"});
          }).on("mouseout", function(){
            $(".body-ring").css({fill: "#fff"});
            $("#parts").empty();
            $("#moPrice").empty();
            $("#naPrice").empty();
            $("#17365").css("fill", "");
            $("#14660").css("fill", "");
          });
        });

      // Pinky
      $(document).ready(function(){
          $(".body-pinky").on("mouseover", function(){
            $(".body-pinky").css({fill: "#FF261B"});
            $("#parts").append("Pinky");
            $("#moPrice").append("$10,915");
            $("#naPrice").append("$11,343");
            $('#10915').css({fill: "#fa6956"});
            $('#11343').css({fill: "#36bfc7"});
          }).on("mouseout", function(){
            $(".body-pinky").css({fill: "#fff"});
            $("#parts").empty();
            $("#moPrice").empty();
            $("#naPrice").empty();
            $("#10915").css("fill", "");
            $("#11343").css("fill", "");
          });
        });

      // Feet
      $(document).ready(function(){
          $(".body-feet").on("mouseover", function(){
            $(".body-feet").css({fill: "#FF261B"});
            $("#parts").append("Foot");
            $("#moPrice").append("$74,418");
            $("#naPrice").append("$91,779");
            $('#74418').css({fill: "#fa6956"});
            $('#91779').css({fill: "#36bfc7"});
          }).on("mouseout", function(){
            $(".body-feet").css({fill: "#fff"});
            $("#parts").empty();
            $("#moPrice").empty();
            $("#naPrice").empty();
            $("#74418").css("fill", "");
            $("#91779").css("fill", "");
          });
        });


      // Big Toe
      $(document).ready(function(){
          $(".body-toe").on("mouseover", function(){
            $(".body-toe").css({fill: "#FF261B"});
            $("#parts").append("Big Toe");
            $("#moPrice").append("$19,845");
            $("#naPrice").append("$23,436");
            $('#19845').css({fill: "#fa6956"});
            $('#23436').css({fill: "#36bfc7"});
          }).on("mouseout", function(){
            $(".body-toe").css({fill: "#fff"});
            $("#parts").empty();
            $("#moPrice").empty();
            $("#naPrice").empty();
            $("#19845").css("fill", "");
            $("#23436").css("fill", "");
          });
        });

      // Testicle
      $(document).ready(function(){
          $(".body-testicle").on("mouseover", function(){
            $(".body-testicle").css({fill: "#FF261B"});
            $("#parts").append("Testicle");
            $("#moPrice").append("$0");
            $("#naPrice").append("$27,678");
            $('#69457').css({fill: "#fa6956"});
            $('#96700').css({fill: "#36bfc7"});
          }).on("mouseout", function(){
            $(".body-testicle").css({fill: "#fff"});
            $("#parts").empty();
            $("#moPrice").empty();
            $("#naPrice").empty();
            $('#69457').css("fill", "");
            $('#96700').css("fill", "");
          });
        });

    </script>


    <!-- Workers Compensation Chart -->
    <svg id="bodychart" width="900" height="500" style="display: block; margin: auto"></svg>

    <script>

    var svg = d3.select("#bodychart"),
        margin = {top: 20, right: 20, bottom: 30, left: 50},
        width = +svg.attr("width") - margin.left - margin.right,
        //+svg.attr("width") is the number of svg width
        height = +svg.attr("height") - margin.top - margin.bottom,
        g = svg.append("g").attr("transform", "translate(" + margin.left + "," + margin.top +")" ); //Not quite understand (??)

    //The overall chart x   
    var x0 = d3.scaleBand()
        .rangeRound([0, width])
        .paddingInner(0.1);

    //The small nesting chart (the small groups)
    var x1 = d3.scaleBand()
        .padding(0.05);

    //The overall chart y
    var y = d3.scaleLinear()
    //Band scales are like ordianl scales except the output range is continous and numeric
        .rangeRound([height, 0]);

    var z = d3.scaleOrdinal()
        .range(["#ababab", "#cccccc"]);

        // .range(["#fa6956", "#36bfc7"]);


    var tooltip = d3.select("body").append("div").attr("class", "toolTip");

    d3.csv("number.csv", function(d, i, columns){
      for (var i = 1, n = columns.length; i < n; ++i) d[columns[i]] = + d[columns[i]];
        return d;
    }, function(error, data) {
      if (error) throw error;

      // console.log(data);

      var keys = data.columns.slice(1); //Get all the key and value (columns except BodyParts)

      //console.log(keys);
      //return ["Missouri", "National_Average"]

      x0.domain(data.map(function(d) {return d.BodyParts; }));
      x1.domain(keys).rangeRound([0, x0.bandwidth()]);
      y.domain([0, d3.max(data, function(d) {return d3.max(keys, function(key) {return d[key]; }); })]);

      g.append("g")
        .selectAll("g")
        .data(data)
        .enter()
        .append("g")
          .attr("transform", function(d) {return "translate(" + x0(d.BodyParts) + ",0)"; })
        // "g" is for the big chart; the rect is for the small nesting column charts
        .selectAll("rect")
        .data(function(d) {return keys.map(function(key){return {key: key, value: d[key]}; }); })
        .enter()
        .append("rect")
          .attr("x", function(d) {return x1(d.key);})
          // Because key is the name. d.key is basically counting the number. x1(d.key) is counting the bandwidth box number (https://github.com/d3/d3-scale)
          .attr("y", function(d) {return y(d.value);})
          .attr("width", x1.bandwidth())
          .attr("height", function(d){return height - y(d.value);})
          .attr("fill", function(d, i) {
            return z(d.key);
            })
          .attr("id", function(d){
            return d.value;
          })
          .on("mousemove", function(d, i){
            tooltip
              .style("left", d3.event.pageX - 50 + "px")
              .style("top", d3.event.pageY - 70 + "px")
              .style("display", "inline-block")

              .html("<span style='font-weight: bold'>"+ (d.key) +"</span>" + ":" + "<br>" + "$" + d3.format(",.0f")(d.value));
        })
          .on("mouseover", function(){d3.select(this).attr("fill","orange");})
             // .on("mouseover", function(){d3.select(this).select function(){
             //  return document.getElementById("#body-head").setAttribute("fill", "orange");
             // })})
          .on("mouseout", function(d){ tooltip.style("display", "none"); d3.select(this).attr("fill", function(d){return z(d.key); }); });

        g.append("g")
          .attr("class", "axis")
          .attr("transform", "translate(0," + height + ")")
          .call(d3.axisBottom(x0));

        g.append("g")
            .attr("class", "axis")
            .call(d3.axisLeft(y).ticks(10, ",.0f"))
          .append("text")
            .attr("x", -32)
            .attr("y", y(y.ticks().pop()) + 0.5)
            .attr("dy", "-3em")
            //dy and dx are used to establish fancier multi-line text layouts
            .attr("fill", "#000")
            .attr("font-weight", "bold")
            .attr("text-anchor", "start")
            .text("Dollars");

    });

    // Materials that helps me study:
    // https://bl.ocks.org/mbostock/3887051
    // https://www.dashingd3js.com/lessons/basic-chart-grouped-bar-chart
    // http://learnjsdata.com/read_data.html
    // http://learnjsdata.com/group_data.html For slice, group data
    // https://github.com/d3/d3-axis#axis_tickFormat
    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map?v=control (understand data.map())

</script>
    

</body>
</html>
