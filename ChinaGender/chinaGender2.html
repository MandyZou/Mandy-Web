<html>
<head>
    <title>How does China Perform in Gender Difference?</title>

    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <link href="https://fonts.googleapis.com/css?family=Hind+Madurai|Patua+One" rel="stylesheet">

    <style>
        body {
            font-family: 'Hind Madurai', sans-serif;
            background-color: #fbf5e0;
        }

        .intro {
            text-align: right;
            margin-right: 15px;
            margin-bottom: 50px;
        }

        h1 {
            text-align: center;
            font-size: 80px;
            font-family: 'Patua One', cursive;
            color: #084c8f;
            margin-bottom: 35px;
        }

        .h1-china {
            color: #C8515F;
        }

        .h1-underline {
            text-decoration: underline;
        }

        #x_axis path{
            display: none;
        }

        .button-group01{
            float: left;
        }

        .button-group{
            float: left;
            margin-left: 20px;
        }

        button {
            border: none;
            background-color: #2589BD;
            color: white;
            font-size: 13px;
            margin-left: 5px;
            cursor: pointer;
        }

        button:hover {
            background-color: #195f84;
        }

        button:focus {
            outline: 0;
            background-color: #195f84;
        }

        .article-content{
            width: 50%;
            margin: 0 auto;
            padding-bottom: 20px;
            font-size: 18px;
            line-height: 30px;
        }

        #all-asia-container{
            width: 90%;
            margin: 0 auto;
        }

    </style>
</head>

<body>
    <div class="intro">
            <img src="manyunzou.png" style="width: 100px; margin-top: 20px;" />
    </div>

    <h1>How does <span class="h1-china">China</span> Perform 
        <br/>
        in <span class="h1-underline">Gender Difference</span>?</h1>

    <p class="article-content">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum vitae libero dolor. Quisque eget ornare tellus. Cras eleifend nec tellus vitae laoreet. Ut eu pretium nisi, vitae semper urna. Mauris sit amet tortor nunc. Nullam vel odio tortor. Praesent ut elit rutrum, faucibus lorem mollis, pharetra nisi. Donec bibendum neque quis dui tristique pharetra. Morbi lobortis sapien a ipsum mattis, et porta arcu consectetur. Sed dapibus, magna quis ultrices interdum, erat felis fringilla dui, non sollicitudin neque lacus vel neque. Integer a odio eu quam gravida ullamcorper sit amet dapibus urna. Ut tempor risus ex, a sagittis ipsum tempor at. Suspendisse in lectus maximus, tempor velit ac, tincidunt mi.
    </p>

    <p class="article-content" style="margin-bottom: 30px">
        Fusce ornare mi ut tempor pretium. Proin at nunc ultrices, maximus libero quis, sollicitudin est. Praesent aliquet viverra turpis, et ullamcorper tellus. In a luctus lectus, eu auctor nunc. Quisque id aliquet mi. Mauris tempor ut ex at pretium. Praesent a orci nisl. Fusce accumsan dolor sed semper commodo. Proin eget neque lorem.
    </p>

    <div id="all-asia-container">
        <div class="button-group01">
        <button id="all-asia-button">Show Asia</button><button id="all-asia-button-hide">Hide Asia</button>
        </div>

        <div class="button-group">
        <button id="all-comm-button">Show Communist States</button><button id="all-comm-button-hide">Hide Communist States</button>
        </div>

        <div class="button-group">
        <button id="all-gdp-button">Show GDP TOP 10</button><button id="all-gdp-button-hide">Hide GDP TOP 10</button>
        </div>

        <div class="button-group">
        <button id="all-popu-button">Show Population Top 10</button><button id="all-popu-button-hide">Hide Population Top 10</button>
        </div>

        <div id="gg-all"></div>
    </div>
    <!-- End of all asia container -->

    <script>
    var margin = {top: 20, left: 20, right: 20, bottom: 20},
        width = 1200 - margin.left - margin.right,
        height = 200 - margin.top - margin.bottom;

    d3.queue()
        .defer(d3.csv, "China_all.csv", type)
        .await(ready);

    function ready(error, data){
        if(error) throw error;

        var svg_all = d3.select("#gg-all")
                    .append("svg")
                        .attr("width", width + margin.left + margin.right)
                        .attr("height", height + margin.top + margin.bottom)
                    .append("g")
                    .attr("transform", "translate(" + margin.top + "," + margin.left + ")")
                    .attr("id","gg-all-graphic")
                    .call(d3.zoom().on("zoom", zoom));

        svg_all.append("line")
            .style("stroke","black")
            .attr("x1", 0)
            .attr("y1", 80)
            .attr("x2", 2300)
            .attr("y2", 80)
            .style("stroke", "#999999");

        // For zoom in, name every part of the axis separately
        var x = d3.scaleLinear()
                    .domain([0.5,0.8])
                    .range([0, width]);

        var xAxis = d3.axisBottom(x);

        var x_axis = svg_all.append("g")
                        .attr("id","x_axis")
                        .attr("transform", "translate(75,0)")
                        // .style("display","none")
                        .call(xAxis);

        var bars = svg_all.selectAll(".bar")
                        .data(data)
                    .enter().append("rect")
                        .attr("x", function(d){
                            if(d.Global > 0){
                                return x(d.Global);
                            } else {
                                return x(0);
                            }
                        })
                        .attr("width", 5)
                        .attr("y", 50)
                        .attr("height", 60)
                        .attr("class", function(d){return d.Countries + " " + d.Category1 + " " + d.Category2 + " " + d.Category3 + " " + d.Category4; })
                        .attr("fill", function(d){
                            if (d.Countries == "China"){
                                return "#C8515F";
                            } else {
                            return "rgba(201, 201, 201,0.6)"};
                        });


//Append text here
        var barsNumbers = svg_all.selectAll("text.bar")
                                .data(data)
                            .enter().append("text")
                                .attr("class", function(d){return d.Countries + "-numbers" + " " + d.Category1 + "-numbers" + " " + d.Category2 + "-numbers" + " " + d.Category3 + "-numbers" + " " + d.Category4 + "-numbers"; })
                                .attr("text-anchor","middle")
                                .attr("x", function(d){
                                        if(d.Global > 0){
                                            return x(d.Global);
                                        } else {
                                            return x(0);
                                        }
                                    })
                                .attr("y", 130)
                                .text(function(d){return d.Global})
                                .style("visibility", function(d){
                                    if (d.Countries == "China"){
                                            return "visible";
                                        } else {
                                        return "hidden"};
                                });

         var barsText =  svg_all.selectAll("text.bar")
                                .data(data)
                            .enter().append("text")
                                .attr("class", function(d){return d.Countries + "-text" + " " + d.Category1 + "-text" + " " + d.Category2 + "-text" + " " + d.Category3 + "-text" + " " + d.Category4 + "-text"; })
                                .attr("text-anchor","middle")
                                .attr("x", function(d){
                                        if(d.Global > 0){
                                            return x(d.Global);
                                        } else {
                                            return x(0);
                                        }
                                    })
                                .attr("y", 40)
                                .text(function(d){return d.Countries})
                                .style("visibility", function(d){
                                    if (d.Countries == "China"){
                                            return "visible";
                                        } else {
                                        return "hidden"};
                                });


        function zoom(){
           svg_all.transition()
                .duration(50)
                .call(xAxis.scale(d3.event.transform.rescaleX(x)));

            var new_xScale = d3.event.transform.rescaleX(x);
            bars.attr("x",function(d){
                                if(d.Global > 0){
                                    return new_xScale(d.Global);
                                } else {
                                    return new_xScale(0);
                                }
            });
            barsNumbers.attr("x",function(d){
                                if(d.Global > 0){
                                    return new_xScale(d.Global);
                                } else {
                                    return new_xScale(0);
                                }
            })
                        .style("stroke", function(d) {
                            if(d.Countries == "China"){
                                return "#C8515F";
                            } else {
                                return "#000"
                            }
                        });
            barsText.attr("x",function(d){
                                if(d.Global > 0){
                                    return new_xScale(d.Global);
                                } else {
                                    return new_xScale(0);
                                }
            })
                        .style("stroke",function(d) {
                            if(d.Countries == "China"){
                                return "#C8515F";
                            } else {
                                return "#000"
                            }
                        });
    };

    };
    // End of function ready()


    function type(d) {
        d.Global = +d.Global;
        return d;
    };


    </script>

    <script>
    $("#all-asia-button").click(function(){
        $(".Asia").css("fill","#324167");
        $(".Asia-text").css("visibility","visible");
        $(".Asia-numbers").css("visibility","visible");
    });

    $("#all-asia-button-hide").click(function(){
        $(".Asia").css("fill","rgba(201, 201, 201,0.6)");
        $(".Asia-text").css("visibility","hidden");
        $(".Asia-numbers").css("visibility","hidden");
    });

    // var asiaChange = true;
    // var asiaChange2 = true;

    // $("#all-asia-button").click(function(){
    //     $(".Asia-text").css("visibility","visible");
    // })

// toggle(function(){
//         $(".Asia").css("fill","#324167");
//         // $(".Asia-text").css("visibility","visible");
//         // $(".Asia-numbers").css("visibility","visible");
//     }, function() {
//         $(".Asia").css("fill","rgba(201, 201, 201,0.6)");
//         // $(".Asia-text").css("visibility","hidden");
//         // $(".Asia-numbers").css("visibility","hidden");
//     });


    $("#all-comm-button").click(function(){
        $(".Social").css("fill","#5AB0CD");
        $(".Social-text").css("visibility","visible");
        $(".Social-numbers").css("visibility","visible");
    });

    $("#all-comm-button-hide").click(function(){
        $(".Social").css("fill","rgba(201, 201, 201,0.6)");
        $(".Social-text").css("visibility","hidden");
        $(".Social-numbers").css("visibility","hidden");
    });

    $("#all-gdp-button").click(function(){
        $(".GDP").css("fill","#005E7C");
        $(".GDP-text").css("visibility","visible");
        $(".GDP-numbers").css("visibility","visible");
    });

    $("#all-gdp-button-hide").click(function(){
        $(".GDP").css("fill","rgba(201, 201, 201,0.6)");
        $(".GDP-text").css("visibility","hidden");
        $(".GDP-numbers").css("visibility","hidden");
    });

    $("#all-popu-button").click(function(){
        $(".Popu").css("fill","#9BBEC7");
        $(".Popu-text").css("visibility","visible");
        $(".Popu-numbers").css("visibility","visible");
    });

    $("#all-popu-button-hide").click(function(){
        $(".Popu").css("fill","rgba(201, 201, 201,0.6)");
        $(".Popu-text").css("visibility","hidden");
        $(".Popu-numbers").css("visibility","hidden");
    });


    </script>
</body>
</html>