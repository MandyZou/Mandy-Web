<!DOCTYPE html>
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<link rel="stylesheet" href="main.css">
<script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>

<html>
<h1 class="headline"> Number of Parking Tickets Issued in Columbia Increases in 2015 </h1>
<p> 
Columbia Parking Supervisor Tanner Morrell said by 2013, the city had finished two new parking garages, Short Street Garage and Walnut Garage, leading to a decrease in the number of parking tickets. However, in 2015, the number of parking tickets issued has increased again. Morrell said this is because only one out of six parking garages downtown is not full. Third Ward Councilman Karl Skala said the city of Columbia needs more money to devote to parking utility maintenance and construction. 
</p> 

<body>
<svg id="graphics" width="1000" height="500"></svg>

<style>
/*aixs style*/
.axis path, .axis line {
    fill: none;
    stroke: #777;
    shape-rendering: crispEdges;
}

.axis text {
    font-family: 'Times New Roman';
    font-size: 15px;
}

.bar {
    fill: FireBrick;
}

</style>

<script>
// Start a chart from here
InitChart();

function InitChart() {

// Here is the numbers
  var data = [{
    'x': 2012,
    'y': 59924
  }, {
    'x': 2013,
    'y': 50972
  }, {
    'x': 2014,
    'y': 50104
  }, {
    'x': 2015,
    'y': 53827
  }];

// Positions and size of the chart
  var vis = d3.select('#graphics'),
    WIDTH = 1000,
    HEIGHT = 500,
    MARGINS = {
      top: 20,
      right: 20,
      bottom: 20,
      left: 125,
    },

// The x,y range
    xRange = d3.scale.ordinal().rangeRoundBands([MARGINS.left, WIDTH - MARGINS.right], 0.7).domain(data.map(function (d) {
      return d.x;
    })),

    yRange = d3.scale.linear().range([HEIGHT - MARGINS.top, MARGINS.bottom]).domain([0, 60000]),

// Set up the axis and ticks
    xAxis = d3.svg.axis()
      .scale(xRange)
      .tickSize(5)
      .tickSubdivide(true)
      .outerTickSize(0);

    yAxis = d3.svg.axis()
      .scale(yRange)
      .tickSize(5)
      .orient("left")
      .tickSubdivide(true)
      .tickValues([10000,20000,30000,40000,50000,60000])
      .outerTickSize(0);

// Append!
  vis.append('svg:g')
    .attr('class', 'x axis')
    .attr('transform', 'translate(0,' + (HEIGHT - MARGINS.bottom) + ')')
    .call(xAxis);

  vis.append('svg:g')
    .attr('class', 'y axis')
    .attr('transform', 'translate(' + (MARGINS.left) + ',0)')
    .call(yAxis);

// Overall. And where to add "on"
  vis.selectAll('rect')
    .data(data)
    .enter()
    .append('rect')
    .attr('x', function (d) {
      return xRange(d.x);
    })
    .attr('y', function (d) {
      return yRange(d.y);
    })
    .attr('width', xRange.rangeBand())
    .attr('height', function (d) {
      return ((HEIGHT - MARGINS.bottom) - yRange(d.y));
    })
    .attr('fill', '#58AEEE')
    .on('mouseover',function(d){
      d3.select(this)
        .attr('fill','#878D92');
      tip.show(d)
    })
    .on('mouseout',function(d){
      d3.select(this)
        .attr('fill','#58AEEE');
      tip.hide()  
    })

  /* Build up tooltip */

var tip = d3.tip()
      .attr('class', 'd3-tip')
      .html(function(d) { return '<span>' + d.y + '</span>' + ' tickets' })
      .offset([-10, 0]);

var vis = d3.select(document.body)
  .append('svg')
  .call(tip)

}
</script>