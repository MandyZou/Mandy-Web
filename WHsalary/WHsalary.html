<!DOCTYPE html>
<meta charset="utf-8">
<head>
    <title>Trump White House Salary</title>

    <script src="http://d3js.org/d3.v4.min.js"></script>

    <script src="jquery-3.2.1.min.js"></script>

    <script src="scroll.js"></script>

<style>
    #trump{
        /*margin-left: 10%;*/
        float: left;
        height: 1000px;
    }

/*    button {
        margin-top: 20px;
        background-color: #FFF;
        border: 2px solid #FFA419;
        border-radius: 8px;
        font-size: 15px;
        padding: 10px 20px;
        -webkit-transition-duration: 0.4s;
        transition-duration: 0.4s;
        cursor: pointer;
    }

    button:hover {
        background-color: #FFA419;
        color: white;
    }

    button:focus {
        outline: 0;
    }*/

    .trump-text{
        float: left;
        padding-top: 250px;
        padding-left: 250px;
    }

</style>
</head>

<body>
    <h1>Trump White House Salary</h1>

    <button id="category-split" style="margin-left: 5%;">Category Split</button>
    <!-- <button id="year-split" style="margin-left: 5%;">Year Split</button> -->
    <!-- <button id="all-split" style="margin-left: 5%;">All</button> -->

    <script>

    $("#category-split").click(function(){
        // $("#button-text").text("Culture // Science // Art // Other");
    });

    // $("#year-split").click(function(){
    //     $("#button-text").text("Before 2000 // After 2000 // Before 1900");
    // });

    // $("#all-split").click(function(){
    //     $("#button-text").text(" ");
    // });



    </script>

    

    <script>

//Set up svg element
    var width = 1024,
        height = 1000;

    var svg = d3.select("body")
                .append("svg")
                .attr("id","trump")
                .attr("width", width)
                .attr("height", height)
                .append("g")
                .attr("transform", "translate(0,0)");

//Scale for circles (different r based on number)
    // var radiusScale = d3.scaleSqrt().domain([0, 187100]).range([1, 5]);

//Set up tootips
    var tip = d3.select("body")
        .append("div")
        .style("position", "absolute")
        .style("z-index", "10")
        .style("visibility", "hidden")
        .style("color", "#2c2c2c")
        .style("padding", "8px")
        .style("background-color", "rgb(255,255,255)")
        .style("border","1px solid #2c2c2c")
        .style("border-radius", "6px")
        .style("font", "12px sans-serif")
        .text("tooltip");

//Set up color scheme
    var color = d3.scaleOrdinal(d3.schemeCategory20c);

//Set up force for different splits
    var ForceXCombine = d3.forceX(700).strength(0.08);

    var ForceXCategory = d3.forceX(function(d){
        if (d.Category === "Advisor"){
            return 300;
        } else if (d.Category === "Analyst"){
            return 550;
        } else if (d.Category === "Assistant"){
            return 800;
        } else if (d.Category === "Assistant staff"){
            return 1000;
        } else if (d.Category === "Assistant to"){
            return 300;
        } else if (d.Category === "Assistant to President"){
            return 550;
        } else if (d.Category === "Chief"){
            return 800;
        } else if (d.Category === "Coordinator"){
            return 1000;
        } else if (d.Category === "Counsel"){
            return 300;
        } else if (d.Category === "Director"){
            return 550;
        } else if (d.Category === "Manager"){
            return 800;
        } else if (d.Category === "Operator"){
            return 1000;
        } else if (d.Category === "Staff"){
            return 300;
        } else if (d.Category === "Secretary"){
            return 550;
        } else if (d.Category === "Strategist"){
            return 800;
        } else if (d.Category === "Specialist"){
            return 1000;
        } else if (d.Category === "Supervisor"){
            return 300;
        }
    });

    var ForceYCategory = d3.forceY(function(d){
        if (d.Category === "Advisor"){
            return 100;
        } else if (d.Category === "Analyst"){
            return 100;
        } else if (d.Category === "Assistant"){
            return 110;
        } else if (d.Category === "Assistant staff"){
            return 100;
        } else if (d.Category === "Assistant to"){
            return 250;
        } else if (d.Category === "Assistant to President"){
            return 250;
        } else if (d.Category === "Chief"){
            return 250;
        } else if (d.Category === "Coordinator"){
            return 250;
        } else if (d.Category === "Counsel"){
            return 400;
        } else if (d.Category === "Director"){
            return 400;
        } else if (d.Category === "Manager"){
            return 400;
        } else if (d.Category === "Operator"){
            return 400;
        } else if (d.Category === "Staff"){
            return 550;
        } else if (d.Category === "Secretary"){
            return 550;
        } else if (d.Category === "Strategist"){
            return 550;
        } else if (d.Category === "Specialist"){
            return 550;
        } else if (d.Category === "Supervisor"){
            return 700;
        }
    });


    // var ForceXYear = d3.forceX(function(d){
    //     if (d.Period === "Before 2000"){
    //         return 300;
    //     } else if (d.Period === "After 2000"){
    //         return 700;
    //     } else if (d.Period === "Before 1900"){
    //         return 1000;
    //     }
    // });

//For the force chart
//STEP ONE: push them to the middle
//STEP TWO: don't have them collide!
    var simulation = d3.forceSimulation()
        .force("x", ForceXCombine)
        .force("y", d3.forceY(300).strength(0.08))
        .force("colide", d3.forceCollide(8));

//Set the viz to load until everything has been processed
    d3.queue()
      .defer(d3.csv, "TrumpSalaries.csv")
      .await(ready);

    function ready(error, datapoints) {
        if(error) throw error;

//Import data. Put everything in "g" so that text and circle can show up together
//<g><circle><text> is the right order!
//<circle><text> is wrong
        var nodes = svg.selectAll("g")
            .data(datapoints)
            .enter().append("g");

//After the "g", append the "circle" and set up everything here
        nodes.append("circle")
             .style("fill", function(d){
                return color(d.Category);
             })
             .attr("r", 5)
             .on("mouseover", function(d){
                    tip.html("<strong>" + (d["Category"]) + "</strong>: <br/>$" + d3.format(",.0f")(d["SALARY"]));
                    tip.style("visibility", "visible");
                })
             .on("mousemove", function() {
                  return tip.style("top", (d3.event.pageY-10)+"px").style("left",(d3.event.pageX+10)+"px");
              })
             .on("mouseout", function(){
                return tip.style("visibility", "hidden");
             });

//Then, append text!
        // nodes.append("text")
        //         .selectAll("tspan")
        //         .data(function(d){ return d["Museum"].split(/(?=[A-Z])/g); })
        //         .enter().append("tspan")
        //             .attr("x", 0)
        //             .attr("y", function(d, i, nodes) { return 13 + (i - nodes.length / 2 - 0.5) * 20; })
        //             .text(function(d){ return d; })
        //             .style("text-anchor", "middle")
        //             .style("fill", "#ffffff");

//Set up the events when you click the button TO SPLIIIIT!
        d3.select("#all-split").on("click", function(d){
            return simulation.force("x", ForceXCombine)
                            .alphaTarget(0.05)
                            .restart();
        });


        d3.select("#category-split").on("click", function(d){
            return simulation.force("x", ForceXCategory)
                            .force("y", ForceYCategory)
                            .alphaTarget(0.3)
                            .restart();
        });


        // d3.select("#year-split").on("click", function(d){
        //     return simulation.force("x", ForceXYear)
        //                 .alphaTarget(0.5)
        //                 .restart();
        // });

//The force is triggered by the "tick." Set up the tick here
        simulation.nodes(datapoints)
            .on('tick', ticked);

//Set up the tick here
        function ticked() {
            // nodes
        nodes.attr("transform", function (d) {
        var k = "translate(" + d.x + "," + d.y + ")";
        return k;
    });
        };
    };

    //Materials: 
    //https://www.dashingd3js.com/svg-text-element
    //https://www.youtube.com/watch?v=lPr60pexvEM
    //https://stackoverflow.com/questions/33928409/how-do-i-add-labels-to-d3-js-force-bubble-chart
    //https://stackoverflow.com/questions/7888238/javascript-split-string-on-uppercase-characters
    //http://bl.ocks.org/mmattozzi/7018021


    </script>

    <!-- <div class="trump-text">Total: 377 People</div> -->

</body>
</html>