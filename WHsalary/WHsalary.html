<!DOCTYPE html>
<meta charset="utf-8">
<head>
    <title>Trump White House Salary</title>

    <script src="http://d3js.org/d3.v4.min.js"></script>

    <script src="jquery-3.2.1.min.js"></script>

    <script src="scroll.js"></script>

    <link rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">

  <link href="https://fonts.googleapis.com/css?family=Maven+Pro" rel="stylesheet">


<style>
    body {
        font-family: 'Maven Pro', sans-serif;
    }

    #trump{
        /*margin-left: 10%;*/
        float: left;
        height: 800px;
    }

    .xaxis .domain{
        display: none;
    }

    .yaxis .domain{
        display: none;
    }

    #trumpchart{
        margin-bottom: 30px;
    }

</style>
</head>

<body>
    <h1 style="text-align: center">Trump White House Salary</h1>


    

    <script>
//Set up svg element
    var width = 1500,
        height = 800;

    var svg = d3.select("body")
                .append("svg")
                .attr("id","trump")
                .attr("width", width)
                .attr("height", height)
                .append("g")
                .attr("transform", "translate(0,0)");

//Set up tootips
    var tip = d3.select("body")
        .append("div")
        .style("position", "absolute")
        .style("z-index", "10")
        .style("visibility", "hidden")
        .style("color", "#2c2c2c")
        .style("padding", "8px")
        .style("background-color", "rgb(255,255,255)")
        .style("border","1px solid #2c2c2c")
        .style("border-radius", "6px")
        .style("font", "12px sans-serif")
        .text("tooltip");

//Set up color scheme
    var color = d3.scaleOrdinal(d3.schemeCategory20c);

//Set up force for different splits

    var ForceXCategory = d3.forceX(function(d){
        if (d.Category === "Advisor"){
            return 300;
        } else if (d.Category === "Analyst"){
            return 550;
        } else if (d.Category === "Assistant"){
            return 800;
        } else if (d.Category === "Assistant staff"){
            return 1000;
        } else if (d.Category === "Assistant to"){
            return 300;
        } else if (d.Category === "Assistant to President"){
            return 550;
        } else if (d.Category === "Chief"){
            return 800;
        } else if (d.Category === "Coordinator"){
            return 1000;
        } else if (d.Category === "Counsel"){
            return 300;
        } else if (d.Category === "Director"){
            return 550;
        } else if (d.Category === "Manager"){
            return 800;
        } else if (d.Category === "Operator"){
            return 1000;
        } else if (d.Category === "Staff"){
            return 300;
        } else if (d.Category === "Secretary"){
            return 550;
        } else if (d.Category === "Strategist"){
            return 800;
        } else if (d.Category === "Specialist"){
            return 1000;
        } else if (d.Category === "Supervisor"){
            return 70;
        }
    });

    var ForceYCategory = d3.forceY(function(d){
        if (d.Category === "Advisor"){
            return 150;
        } else if (d.Category === "Analyst"){
            return 150;
        } else if (d.Category === "Assistant"){
            return 160;
        } else if (d.Category === "Assistant staff"){
            return 150;
        } else if (d.Category === "Assistant to"){
            return 300;
        } else if (d.Category === "Assistant to President"){
            return 300;
        } else if (d.Category === "Chief"){
            return 300;
        } else if (d.Category === "Coordinator"){
            return 300;
        } else if (d.Category === "Counsel"){
            return 480;
        } else if (d.Category === "Director"){
            return 480;
        } else if (d.Category === "Manager"){
            return 480;
        } else if (d.Category === "Operator"){
            return 480;
        } else if (d.Category === "Staff"){
            return 670;
        } else if (d.Category === "Secretary"){
            return 670;
        } else if (d.Category === "Strategist"){
            return 670;
        } else if (d.Category === "Specialist"){
            return 670;
        } else if (d.Category === "Supervisor"){
            return 670;
        }
    });

var ForceXCombine = d3.forceX(650).strength(0.08);

//For the force chart
//STEP ONE: push them to the middle
//STEP TWO: don't have them collide!
    var simulation = d3.forceSimulation()
        .force("x", ForceXCombine)
        .force("y", d3.forceY(200).strength(0.08))
        .force("colide", d3.forceCollide(8));

//Set the viz to load until everything has been processed
    d3.queue()
      .defer(d3.csv, "TrumpSalaries.csv")
      .await(ready);

    function ready(error, datapoints) {
        if(error) throw error;

//Import data. Put everything in "g" so that text and circle can show up together
//<g><circle><text> is the right order!
//<circle><text> is wrong
        var nodes = svg.selectAll("g")
            .data(datapoints)
            .enter().append("g");

//After the "g", append the "circle" and set up everything here
        nodes.append("circle")
             .style("fill", function(d){
                return color(d.Category);
             })
             .attr("r", 5)
             .on("mouseover", function(d){
                    tip.html("<strong>" + (d["NAME"]) + "</strong>: <br/>$" + d3.format(",.0f")(d["SALARY"]));
                    tip.style("visibility", "visible");
                })
             .on("mousemove", function() {
                  return tip.style("top", (d3.event.pageY-10)+"px").style("left",(d3.event.pageX+10)+"px");
              })
             .on("mouseout", function(){
                return tip.style("visibility", "hidden");
             });

//Set up the events when you click the button TO SPLIIIIT!
        d3.select("#all-split").on("click", function(d){
            return simulation.force("x", ForceXCombine)
                            .alphaTarget(0.05)
                            .restart();
        });


        d3.select("#category-split").on("click", function(d){
            return simulation.force("x", ForceXCategory)
                            .force("y", ForceYCategory)
                            .alphaTarget(0.3)
                            .restart();
        });




//The force is triggered by the "tick." Set up the tick here
        simulation.nodes(datapoints)
            .on('tick', ticked);

//Set up the tick here
        function ticked() {
            // nodes
        nodes.attr("transform", function (d) {
        var k = "translate(" + d.x + "," + d.y + ")";
        return k;
    });
        };

    //text for all
    svg.append("text")
        .attr("x", 600)
        .attr("y", 400)
        .attr("class","text-all")
        .text("Total: 377");

    //text for diff categories
    svg.append("text")
        .attr("x", 260)
        .attr("y", 240)
        .attr("class","text-category")
        .attr("visibility","hidden")
        .text("Advisor: 18");

    svg.append("text")
        .attr("x", 510)
        .attr("y", 240)
        .attr("class","text-category")
        .attr("visibility","hidden")
        .text("Advisor: 20");

    svg.append("text")
        .attr("x", 760)
        .attr("y", 240)
        .attr("class","text-category")
        .attr("visibility","hidden")
        .text("Assistant: 54");

    svg.append("text")
        .attr("x", 950)
        .attr("y", 240)
        .attr("class","text-category")
        .attr("visibility","hidden")
        .text("Assistant staff: 9");

    svg.append("text")
        .attr("x", 260)
        .attr("y", 380)
        .attr("class","text-category")
        .attr("visibility","hidden")
        .text("Assistant to: 32");

    svg.append("text")
        .attr("x", 510)
        .attr("y", 380)
        .attr("class","text-category")
        .attr("visibility","hidden")
        .text("Assistant to President: 28");

    svg.append("text")
        .attr("x", 760)
        .attr("y", 380)
        .attr("class","text-category")
        .attr("visibility","hidden")
        .text("Chief: 12");

    svg.append("text")
        .attr("x", 950)
        .attr("y", 380)
        .attr("class","text-category")
        .attr("visibility","hidden")
        .text("Coordinator: 4");

    svg.append("text")
        .attr("x", 260)
        .attr("y", 580)
        .attr("class","text-category")
        .attr("visibility","hidden")
        .text("Counsel: 29");

    svg.append("text")
        .attr("x", 510)
        .attr("y", 580)
        .attr("class","text-category")
        .attr("visibility","hidden")
        .text("Director: 109");

    svg.append("text")
        .attr("x", 760)
        .attr("y", 580)
        .attr("class","text-category")
        .attr("visibility","hidden")
        .text("Manager: 10");

    svg.append("text")
        .attr("x", 950)
        .attr("y", 580)
        .attr("class","text-category")
        .attr("visibility","hidden")
        .text("Operator: 12");

    svg.append("text")
        .attr("x", 510)
        .attr("y", 750)
        .attr("class","text-category")
        .attr("visibility","hidden")
        .text("Secretary: 5");

    svg.append("text")
        .attr("x", 950)
        .attr("y", 750)
        .attr("class","text-category")
        .attr("visibility","hidden")
        .text("Specialist: 3");

    svg.append("text")
        .attr("x", 260)
        .attr("y", 750)
        .attr("class","text-category")
        .attr("visibility","hidden")
        .text("Staff: 25");

    svg.append("text")
        .attr("x", 760)
        .attr("y", 750)
        .attr("class","text-category")
        .attr("visibility","hidden")
        .text("Strategist: 2");

    svg.append("text")
        .attr("x", 40)
        .attr("y", 750)
        .attr("class","text-category")
        .attr("visibility","hidden")
        .text("Supervisor: 5");


// Column-ish chart starts here
    var chart_margin = {top: 50, left: 50, right: 20, bottom:50},
        chart_height = 700 - chart_margin.top - chart_margin.bottom,
        chart_width = 1500 - chart_margin.left - chart_margin.right,
        box_w = ((chart_width - chart_margin.left) / 17) + 2;

    var chart = d3.select("body")
                .append("svg")
                .attr("id","trumpchart")
                .attr("width", chart_width + chart_margin.left + chart_margin.right)
                .attr("height", chart_height + chart_margin.top + chart_margin.bottom)
                .append("g")
                .attr("transform", "translate(" + (chart_margin.top+20) + "," + chart_margin.left + ")");

    var x = d3.scaleBand()
              .domain(["Advisor","Analyst","Assistant","Assistant staff","Assistant to","Assistant to President","Chief","Coordinator","Counsel","Director","Manager","Operator","Secretary","Specialist","Staff","Strategist","Supervisor"])
              .range([0, (box_w + 1) * 17]);

    var y = d3.scaleLinear()
              .domain([0,200000])
              .range([chart_height,0]);

    // var ForceXCategory = d3.forceX(function(d){
    //     if (d.Category === "Advisor"){
    //         return 300;
    //     } else if (d.Category === "Analyst"){
    //         return 550;
    //     } else if (d.Category === "Assistant"){
    //         return 800;
    //     } else if (d.Category === "Assistant staff"){
    //         return 1000;
    //     } else if (d.Category === "Assistant to"){
    //         return 300;
    //     } else if (d.Category === "Assistant to President"){
    //         return 550;
    //     } else if (d.Category === "Chief"){
    //         return 800;
    //     } else if (d.Category === "Coordinator"){
    //         return 1000;
    //     } else if (d.Category === "Counsel"){
    //         return 300;
    //     } else if (d.Category === "Director"){
    //         return 550;
    //     } else if (d.Category === "Manager"){
    //         return 800;
    //     } else if (d.Category === "Operator"){
    //         return 1000;
    //     } else if (d.Category === "Staff"){
    //         return 300;
    //     } else if (d.Category === "Secretary"){
    //         return 550;
    //     } else if (d.Category === "Strategist"){
    //         return 800;
    //     } else if (d.Category === "Specialist"){
    //         return 1000;
    //     } else if (d.Category === "Supervisor"){
    //         return 70;
    //     }
    // });

    // var ForceYCategory = d3.forceY(function(d){
    //     if (d.Category === "Advisor"){
    //         return 150;
    //     } else if (d.Category === "Analyst"){
    //         return 150;
    //     } else if (d.Category === "Assistant"){
    //         return 160;
    //     } else if (d.Category === "Assistant staff"){
    //         return 150;
    //     } else if (d.Category === "Assistant to"){
    //         return 300;
    //     } else if (d.Category === "Assistant to President"){
    //         return 300;
    //     } else if (d.Category === "Chief"){
    //         return 300;
    //     } else if (d.Category === "Coordinator"){
    //         return 300;
    //     } else if (d.Category === "Counsel"){
    //         return 480;
    //     } else if (d.Category === "Director"){
    //         return 480;
    //     } else if (d.Category === "Manager"){
    //         return 480;
    //     } else if (d.Category === "Operator"){
    //         return 480;
    //     } else if (d.Category === "Staff"){
    //         return 670;
    //     } else if (d.Category === "Secretary"){
    //         return 670;
    //     } else if (d.Category === "Strategist"){
    //         return 670;
    //     } else if (d.Category === "Specialist"){
    //         return 670;
    //     } else if (d.Category === "Supervisor"){
    //         return 670;
    //     }
    // });
    // console.log(datapoints)

    chart.selectAll("circle")
            .data(datapoints)
            .enter().append("circle")
                .attr("cx", function(d,i){return x(d.Category); })
                .attr("cy", function(d,i){return y(d.SALARY)})
                .attr("r", 5)
            .style("fill", function(d){
                return color(d.Category);
             })
            .on("mouseover", function(d){
                    tip.html("<strong>" + (d["NAME"]) + "</strong>: <br/>$" + d3.format(",.0f")(d["SALARY"]));
                    tip.style("visibility", "visible");
                })
            .on("mousemove", function() {
                  return tip.style("top", (d3.event.pageY-10)+"px").style("left",(d3.event.pageX+10)+"px");
              })
            .on("mouseout", function(){
                return tip.style("visibility", "hidden");
             });

    chart.append("g")
            .attr("class", "xaxis")
            .attr("transform","translate(-42," + (chart_height+15) + ")")
            .call(d3.axisBottom(x)
                        .tickSize([3])
                        .tickSizeOuter(0)
                        .tickPadding([5]));

    chart.append("g")
            .attr("class","yaxis")
            .attr("transform","translate(-20,0)")
            .call(d3.axisLeft(y)
                    .tickSize([6])
                    .tickFormat(d3.format(",d")))
            .append("text")
            .attr("x", 0)
            .attr("y", y(y.ticks().pop())+ 0.5)
            .attr("dy", "-1em")
            .attr("fill", "#000")
            .attr("font-wight", "bold")
            .attr("text-anchor", "start")
            .text("Dollars($)");

    };

    </script>

    <!-- <div class="trump-text">Total: 377 People</div> -->

</body>
</html>