<!DOCTYPE html>
<head>
    <title>Missing Children</title>

    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://d3js.org/d3-selection-multi.v1.min.js"></script>

    <!-- Introducing TopoJson -->
    <script src="https://unpkg.com/topojson@3.0.0"></script>

    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>

    <style>
    #childMap{
        width: 2000px;
        height: 900px;
    }

    .states {
        fill: #ddd;
        stroke: white;
        stroke-width: 1.5px;
    }


    .yaxis .domain{
        display: none;
    }


    </style>
</head>

<body>
    <div id="childMap"></div>
    <script>
    var margin = {top: 30, left: 10, right: 1000, bottom: 40},
        height = 600 - margin.top - margin.bottom,
        width = 1500 - margin.left - margin.right,
        box_w = ((width - margin.left) / 52) + 80;

    var svg = d3.select("#childMap")
                .append("svg")
                .attr("height", height + margin.top + margin.bottom)
                .attr("width", width + margin.left + margin.right)
                .append("g")
                .attr("transform", "translate(" + margin.left + "," + margin.top +")");

    var x = d3.scaleBand().range([0, (box_w + 1) * 12]),
        y = d3.scaleLinear().range([height,0]);

    d3.queue()
        .defer(d3.csv, "childoutput.csv")
        .await(ready);

    function ready(error, data){
        if (error) throw error;

        x.domain(["AL","AK","AS","AZ","AR","CA","CO","CT","DE","DC","FL","GA","GU","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MH","MA","MI","FM","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","MP","OH","OK","OR","PW","PA","PR","RI","SC","SD","TN","TX","UT","VT","VA","VI","WA","WV","WI","WY"]);
        y.domain([2008,2017]);

        // console.log(typeof(domain))

        for (var i = 0; i<data.length; i++){

        var radiusScale = d3.scaleSqrt().domain([0, 144])
                                        .range([2,9]);

        // console.log(data)

        svg.selectAll("circle")
            .data(data)
            .enter().append("circle")
            .attr("cx", function(d,i){return x(d.State); })
            .attr("cy", function(d,i){return y(d.Year)})
            .attr("r", function(d){
                return radiusScale(d.Number);
            })
            .append("g")
            .attr("transform","translate(0, 90)");

        svg.append("g")
            .attr("class", "xaxis")
            .attr("transform","translate(0," + (height+20) + ")")
            .call(d3.axisBottom(x)
                        .tickSize([0]));

        svg.append("g")
            .attr("class","yaxis")
            .attr("transform","translate(" + (width*2.3) + ",0)")
            .call(d3.axisLeft(y)
                    .tickSize([0])
                    // .tickPadding([10])
                    .tickFormat(d3.format("")));


         

    }; //End of i loop
        

    };




    </script>

</body>
</html>