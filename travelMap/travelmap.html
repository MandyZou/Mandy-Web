<!DOCTYPE html>
<head>
    <title>Jane's Travel Map</title>

    <script src="https://d3js.org/d3.v4.min.js"></script>
    <!-- Introducing TopoJson -->
    <script src="https://unpkg.com/topojson@3.0.0"></script>

    <script src="jquery-3.2.1.min.js"></script>

    <!-- ScrollReveal -->
    <!-- // <script src="https://unpkg.com/scrollreveal/dist/scrollreveal.min.js"></script> -->

    <script src="http://www.web2feel.com/freeby/scroll-effects/assets/viewportchecker.js"></script>

    <link rel="stylesheet" type="text/css" href="animate.css" />

    <script src="jquery.waypoints.min.js"></script>

    <script src="twocolumn.js"></script>

    <link rel="stylesheet" type="text/css" href="style.css" />

    <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">

</head>
<body>
    <div id="wrap">
    <div id="tMap"><h3 id="16Jan">Date</h3></div>

    <script>
    var margin = {top: 0, left: 0, right:0, bottom: 0},
        width = 820 - margin.left - margin.right,
        height = 800 - margin.top - margin.bottom;

    var svg = d3.select("#tMap")
                .append("svg")
                    .attr("width", width)
                    .attr("height", height)
                .append("g")
                    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    var projection = d3.geoMercator()
                    .center([107,31])
                    .scale(700)
                    .translate([width/2, height/2]);

    var path = d3.geoPath()
                .projection(projection); 

    d3.queue()
        .defer(d3.json, "china.json")
        .await(ready);

    function ready(error,data){
        if (error) throw error;

        var china = topojson.feature(data, {
            type:"GeometryCollection",
            geometries: data.objects.CHN_adm1.geometries,
        });

        svg.selectAll("path")
            .data(china.features).enter()
            .append("path")
                .attr("d", path)
            .attr("class",function(d){
                return d.properties.NAME_1;
            })
                .attr("fill", "none")
                .attr("stroke", "steelblue")
            .on("mouseover", function(d){
                d3.select(this).classed("selected", true)
            })
            .on("mousemove", function(d){
                d3.select(this).classed("selected", true)
            })
            .on("mouseout", function(d){
                d3.select(this).classed("selected", false)
            });
        // svg.selectAll("text")
        //   .data(china.features).enter()    
        // .append("text")
        //   .attr("x", function (d) { return path.centroid(d)[0]; })
        //   .attr("y", function (d) { return path.centroid(d)[1]; })
        //   .text(function (d) { return d.properties.NL_NAME_1; }); 
    };

    </script>

    <!-- Text part -->
    <div id="text">
        <h1 style="text-align: center">Jane's Travel Map&#9834;</h1>

        <div id="cities1" class="beforeScroll">
            2016.01 Jiujiang, Jiangxi
        </div>

        <div id="cities2" class="beforeScroll">
            2016.03 Wuhan, Hubei; Yichun, Jiangxi
        </div>

        <div id="cities3" class="beforeScroll">
            2016.05 Beijing
        </div>

        <div id="cities4" class="beforeScroll">
            2016.07 Yichun, Jiangxi
        </div>

        <div id="cities5" class="beforeScroll">
            2016.08 Taiyuan, Xian, Shanxi
        </div>

        <div id="cities6" class="beforeScroll">
            2016.10 Yichun, Jiangxi
        </div>

        <div id="cities7" class="beforeScroll">
            2017.01 Hongkong; Macao; Zhuhai, Guangdong
        </div>

        <div id="cities8" class="beforeScroll">
            2017.03 Changchun, Liaoning
        </div>

        <div id="cities9" class="beforeScroll">
            2017.04 Yichun, Jiangxi
        </div>

        <div id="cities10" class="beforeScroll">
            2017.06 Chengdu, Sichuan
        </div>

    </div>
    <!-- div of text ends here -->
</div>
<!-- Div of wrap ends here -->

</body>
</html>