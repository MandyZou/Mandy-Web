<!DOCTYPE html>
<head>
    <title>Jane's Travel Map</title>

    <script src="https://d3js.org/d3.v4.min.js"></script>
    <!-- Introducing TopoJson -->
    <script src="https://unpkg.com/topojson@3.0.0"></script>
   
</head>
<body>
    <div id="tMap" width="950" height="800"></div>
    <script>
    var margin = {top: 20, left: 20, right:20, bottom: 20},
        width = 950 - margin.left - margin.right,
        height = 800 - margin.top - margin.bottom;

    var svg = d3.select("#tMap")
                .append("svg")
                    .attr("width", width)
                    .attr("height", height)
                .append("g")
                    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    var projection = d3.geoMercator()
                    .center([107,31])
                    .scale(700)
                    .translate([width/2, height/2]);

    var path = d3.geoPath()
                .projection(projection); 

    d3.queue()
        .defer(d3.json, "china.json")
        .await(ready);

    function ready(error,data){
        if (error) throw error;

        var china = topojson.feature(data, {
            type:"GeometryCollection",
            geometries: data.objects.CHN_adm1.geometries,
        });

        svg.selectAll("path")
            .data(china.features).enter()
            .append("path")
                .attr("d", path)
            .attr("class",function(d){
                return d.properties.NAME_1;
            })
            .attr("fill", "none")
            .attr("stroke", "steelblue");



    };




    </script>
</body>
</html>